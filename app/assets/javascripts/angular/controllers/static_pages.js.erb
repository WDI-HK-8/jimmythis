app.controller('StaticPagesCtrl', ['$scope','$http','$auth','$location','$route', function($scope,$http,$auth,$location,$route){
  
  var url = "<%= ENV['URL'] %>" || "http://localhost:3000";

  $http.get(url + '/services').success(function(response) {
    console.log(response);

    if(response) {
      $scope.services = response;
      $scope.services.forEach(function(service) {
        
        var total = 0;
        service.ratings.forEach(function(rating) {
          total += rating.grade;
        });
        service.averageRating = total/service.ratings.length
        
      });

    } else {
      $scope.noServices = true;
    }
  });

  $http.get(url + '/categories').success(function(response) {
    console.log(response)
    if(response) {
      $scope.categories = response;
    } else {
      $scope.noCategories = true
    }
  });

}]);